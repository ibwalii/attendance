/*!
 * jScrollPane - v2.1.0 - 2017-12-2017
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Copyright (c) 2017 Tuukka Pasanen
 * Dual licensed under the MIT or GPL licenses.
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(a){a.fn.jScrollPane=function(c){function b(B,M){var aw,O=this,W,ah,t,aj,R,X,w,o,ax,aC,ar,g,G,f,h,Y,S,an,V,q,y,ao,ad,ak,E,j,aq,av,v,at,aF,d,J,ag=true,N=true,aE=false,i=false,am=B.clone(false,false).empty(),aa=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";if(B.css("box-sizing")==="border-box"){aF=0;d=0}else{aF=B.css("paddingTop")+" "+B.css("paddingRight")+" "+B.css("paddingBottom")+" "+B.css("paddingLeft");d=(parseInt(B.css("paddingLeft"),10)||0)+(parseInt(B.css("paddingRight"),10)||0)}function ap(aQ){var aK,aM,aL,aH,aG,aP,aJ,aN,aO=false,aI=false;aw=aQ;if(W===undefined){aG=B.scrollTop();aP=B.scrollLeft();B.css({overflow:"hidden",padding:0});ah=B.innerWidth()+d;t=B.innerHeight();B.width(ah);W=a('<div class="jspPane" />').css("padding",aF).append(B.children());aj=a('<div class="jspContainer" />').css({width:ah+"px",height:t+"px"}).append(W).appendTo(B)}else{B.css("width","");aj.css({width:"auto",height:"auto"});W.css("position","static");aJ=B.innerWidth()+d;aN=B.innerHeight();console.log("newPaneHeight = "+aN);W.css("position","absolute");aO=aw.stickToBottom&&I();aI=aw.stickToRight&&z();aH=aJ!==ah||aN!==t;ah=aJ;t=aN;aj.css({width:ah,height:t});if(!aH&&J==R&&W.outerHeight()==X){B.width(ah);return}J=R;W.css("width","");B.width(ah);aj.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}W.css("overflow","auto");if(aQ.contentWidth){R=aQ.contentWidth}else{R=W[0].scrollWidth}X=W[0].scrollHeight;W.css("overflow","");w=R/ah;o=X/t;ax=o>1;aC=w>1;if(!(aC||ax)){B.removeClass("jspScrollable");W.css({top:0,left:0,width:aj.width()-d});l();C();P();u()}else{B.addClass("jspScrollable");aK=aw.maintainPosition&&(G||Y);if(aK){aM=aA();aL=ay()}aD();x();D();if(aK){L(aI?(R-ah):aM,false);K(aO?(X-t):aL,false)}H();ae();al();if(aw.enableKeyboardNavigation){Q()}if(aw.clickOnTrack){n()}A();if(aw.hijackInternalLinks){k()}}if(aw.autoReinitialise&&!at){at=setInterval(function(){ap(aw)},aw.autoReinitialiseDelay)}else{if(!aw.autoReinitialise&&at){clearInterval(at)}}aG&&B.scrollTop(0)&&K(aG,false);aP&&B.scrollLeft(0)&&L(aP,false);B.trigger("jsp-initialised",[aC||ax])}function aD(){if(ax){aj.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />')));S=aj.find(">.jspVerticalBar");an=S.find(">.jspTrack");ar=an.find(">.jspDrag");if(aw.showArrows){ao=a('<a class="jspArrow jspArrowUp" />').on("mousedown.jsp",aB(0,-1)).on("click.jsp",az);ad=a('<a class="jspArrow jspArrowDown" />').on("mousedown.jsp",aB(0,1)).on("click.jsp",az);if(aw.arrowScrollOnHover){ao.on("mouseover.jsp",aB(0,-1,ao));ad.on("mouseover.jsp",aB(0,1,ad))}ai(an,aw.verticalArrowPositions,ao,ad)}q=t;aj.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){q-=a(this).outerHeight()});ar.on("mouseenter",function(){ar.addClass("jspHover")}).on("mouseleave",function(){ar.removeClass("jspHover")}).on("mousedown.jsp",function(aG){a("html").on("dragstart.jsp selectstart.jsp",az);ar.addClass("jspActive");var s=aG.pageY-ar.position().top;a("html").on("mousemove.jsp",function(aH){T(aH.pageY-s,false)}).on("mouseup.jsp mouseleave.jsp",au);return false});m()}}function m(){an.height(q+"px");G=0;V=aw.verticalGutter+an.outerWidth();W.width(ah-V-d);try{if(S.position().left===0){W.css("margin-left",V+"px")}}catch(s){}}function x(){if(aC){aj.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />')));ak=aj.find(">.jspHorizontalBar");E=ak.find(">.jspTrack");f=E.find(">.jspDrag");if(aw.showArrows){av=a('<a class="jspArrow jspArrowLeft" />').on("mousedown.jsp",aB(-1,0)).on("click.jsp",az);v=a('<a class="jspArrow jspArrowRight" />').on("mousedown.jsp",aB(1,0)).on("click.jsp",az);if(aw.arrowScrollOnHover){av.on("mouseover.jsp",aB(-1,0,av));v.on("mouseover.jsp",aB(1,0,v))}ai(E,aw.horizontalArrowPositions,av,v)}f.on("mouseenter",function(){f.addClass("jspHover")}).on("mouseleave",function(){f.removeClass("jspHover")}).on("mousedown.jsp",function(aG){a("html").on("dragstart.jsp selectstart.jsp",az);f.addClass("jspActive");var s=aG.pageX-f.position().left;a("html").on("mousemove.jsp",function(aH){U(aH.pageX-s,false)}).on("mouseup.jsp mouseleave.jsp",au);return false});j=aj.innerWidth();af()}}function af(){aj.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){j-=a(this).outerWidth()});E.width(j+"px");Y=0}function D(){if(aC&&ax){var aG=E.outerHeight(),s=an.outerWidth();q-=aG;a(ak).find(">.jspCap:visible,>.jspArrow").each(function(){j+=a(this).outerWidth()});j-=s;t-=s;ah-=aG;E.parent().append(a('<div class="jspCorner" />').css("width",aG+"px"));m();af()}if(aC){W.width((aj.outerWidth()-d)+"px")}X=W.outerHeight();o=X/t;if(aC){aq=Math.ceil(1/w*j);if(aq>aw.horizontalDragMaxWidth){aq=aw.horizontalDragMaxWidth}else{if(aq<aw.horizontalDragMinWidth){aq=aw.horizontalDragMinWidth}}f.css("width",aq+"px");h=j-aq;ac(Y)}if(ax){y=Math.ceil(1/o*q);if(y>aw.verticalDragMaxHeight){y=aw.verticalDragMaxHeight}else{if(y<aw.verticalDragMinHeight){y=aw.verticalDragMinHeight}}ar.css("height",y+"px");g=q-y;ab(G)}}function ai(aH,aJ,aG,s){var aL="before",aI="after",aK;if(aJ=="os"){aJ=/Mac/.test(navigator.platform)?"after":"split"}if(aJ==aL){aI=aJ}else{if(aJ==aI){aL=aJ;aK=aG;aG=s;s=aK}}aH[aL](aG)[aI](s)}function aB(aG,s,aH){return function(){F(aG,s,this,aH);this.blur();return false}}function F(aJ,aI,aM,aL){aM=a(aM).addClass("jspActive");var aK,aH,aG=true,s=function(){if(aJ!==0){O.scrollByX(aJ*aw.arrowButtonSpeed)}if(aI!==0){O.scrollByY(aI*aw.arrowButtonSpeed)}aH=setTimeout(s,aG?aw.initialDelay:aw.arrowRepeatFreq);aG=false};s();aK=aL?"mouseout.jsp":"mouseup.jsp";aL=aL||a("html");aL.on(aK,function(){aM.removeClass("jspActive");aH&&clearTimeout(aH);aH=null;aL.off(aK)})}function n(){u();if(ax){an.on("mousedown.jsp",function(aL){if(aL.originalTarget===undefined||aL.originalTarget==aL.currentTarget){var aJ=a(this),aM=aJ.offset(),aK=aL.pageY-aM.top-G,aH,aG=true,s=function(){var aP=aJ.offset(),aQ=aL.pageY-aP.top-y/2,aN=t*aw.scrollPagePercent,aO=g*aN/(X-t);if(aK<0){if(G-aO>aQ){O.scrollByY(-aN)}else{T(aQ)}}else{if(aK>0){if(G+aO<aQ){O.scrollByY(aN)}else{T(aQ)}}else{aI();return}}aH=setTimeout(s,aG?aw.initialDelay:aw.trackClickRepeatFreq);aG=false},aI=function(){aH&&clearTimeout(aH);aH=null;a(document).off("mouseup.jsp",aI)};s();a(document).on("mouseup.jsp",aI);return false}})}if(aC){E.on("mousedown.jsp",function(aL){if(aL.originalTarget===undefined||aL.originalTarget==aL.currentTarget){var aJ=a(this),aM=aJ.offset(),aK=aL.pageX-aM.left-Y,aH,aG=true,s=function(){var aP=aJ.offset(),aQ=aL.pageX-aP.left-aq/2,aN=ah*aw.scrollPagePercent,aO=h*aN/(R-ah);if(aK<0){if(Y-aO>aQ){O.scrollByX(-aN)}else{U(aQ)}}else{if(aK>0){if(Y+aO<aQ){O.scrollByX(aN)}else{U(aQ)}}else{aI();return}}aH=setTimeout(s,aG?aw.initialDelay:aw.trackClickRepeatFreq);aG=false},aI=function(){aH&&clearTimeout(aH);aH=null;a(document).off("mouseup.jsp",aI)};s();a(document).on("mouseup.jsp",aI);return false}})}}function u(){if(E){E.off("mousedown.jsp")}if(an){an.off("mousedown.jsp")}}function au(){a("html").off("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(ar){ar.removeClass("jspActive")}if(f){f.removeClass("jspActive")}}function T(aH,aI){if(!ax){return}if(aH<0){aH=0}else{if(aH>g){aH=g}}var s=new a.Event("jsp-will-scroll-y");B.trigger(s,[aH]);if(s.isDefaultPrevented()){return}var aM=aH||0;var aL=aM===0,aJ=aM==g,aK=aH/g,aG=-aK*(X-t);if(aI===undefined){aI=aw.animateScroll}if(aI){O.animate(ar,"top",aH,ab,function(){B.trigger("jsp-user-scroll-y",[-aG,aL,aJ])})}else{ar.css("top",aH);ab(aH);B.trigger("jsp-user-scroll-y",[-aG,aL,aJ])}}function ab(aG){if(aG===undefined){aG=ar.position().top}aj.scrollTop(0);G=aG||0;var aJ=G===0,aH=G==g,aI=aG/g,s=-aI*(X-t);if(ag!=aJ||aE!=aH){ag=aJ;aE=aH;B.trigger("jsp-arrow-change",[ag,aE,N,i])}r(aJ,aH);W.css("top",s);B.trigger("jsp-scroll-y",[-s,aJ,aH]).trigger("scroll")}function U(aJ,aI){if(!aC){return}if(aJ<0){aJ=0}else{if(aJ>h){aJ=h}}var aH=new a.Event("jsp-will-scroll-x");B.trigger(aH,[aJ]);if(aH.isDefaultPrevented()){return}var aG=aJ||0;var aM=aG===0,aL=aG==h,aK=aJ/h,s=-aK*(R-ah);if(aI===undefined){aI=aw.animateScroll}if(aI){O.animate(f,"left",aJ,ac,function(){B.trigger("jsp-user-scroll-x",[-s,aM,aL])})}else{f.css("left",aJ);ac(aJ);B.trigger("jsp-user-scroll-x",[-s,aM,aL])}}function ac(aG){if(aG===undefined){aG=f.position().left}aj.scrollTop(0);Y=aG||0;var aJ=Y===0,aI=Y==h,aH=aG/h,s=-aH*(R-ah);if(N!=aJ||i!=aI){N=aJ;i=aI;B.trigger("jsp-arrow-change",[ag,aE,N,i])}p(aJ,aI);W.css("left",s);B.trigger("jsp-scroll-x",[-s,aJ,aI]).trigger("scroll")}function r(aG,s){if(aw.showArrows){ao[aG?"addClass":"removeClass"]("jspDisabled");ad[s?"addClass":"removeClass"]("jspDisabled")}}function p(aG,s){if(aw.showArrows){av[aG?"addClass":"removeClass"]("jspDisabled");v[s?"addClass":"removeClass"]("jspDisabled")}}function K(s,aG){var aH=s/(X-t);T(aH*g,aG)}function L(aG,s){var aH=aG/(R-ah);U(aH*h,s)}function Z(aT,aO,aH){var aL,aI,aJ,s=0,aS=0,aG,aN,aM,aQ,aP,aR;try{aL=a(aT)}catch(aK){return}aI=aL.outerHeight();aJ=aL.outerWidth();aj.scrollTop(0);aj.scrollLeft(0);while(!aL.is(".jspPane")){s+=aL.position().top;aS+=aL.position().left;aL=aL.offsetParent();if(/^body|html$/i.test(aL[0].nodeName)){return}}aG=ay();aM=aG+t;if(s<aG||aO){aP=s-aw.horizontalGutter}else{if(s+aI>aM){aP=s-t+aI+aw.horizontalGutter}}if(!isNaN(aP)){K(aP,aH)}aN=aA();aQ=aN+ah;if(aS<aN||aO){aR=aS-aw.horizontalGutter}else{if(aS+aJ>aQ){aR=aS-ah+aJ+aw.horizontalGutter}}if(!isNaN(aR)){L(aR,aH)}}function aA(){return -W.position().left}function ay(){return -W.position().top}function I(){var s=X-t;return(s>20)&&(s-ay()<10)}function z(){var s=R-ah;return(s>20)&&(s-aA()<10)}function ae(){aj.off(aa).on(aa,function(aK,aL,aI,aG){if(!Y){Y=0}if(!G){G=0}var aH=Y,s=G,aJ=aK.deltaFactor||aw.mouseWheelSpeed;O.scrollBy(aI*aJ,-aG*aJ,false);return aH==Y&&s==G})}function l(){aj.off(aa)}function az(){return false}function H(){W.find(":input,a").off("focus.jsp").on("focus.jsp",function(s){Z(s.target,false)})}function C(){W.find(":input,a").off("focus.jsp")}function Q(){var s,aG,aI=[];aC&&aI.push(ak[0]);ax&&aI.push(S[0]);W.on("focus.jsp",function(){B.focus()});B.attr("tabindex",0).off("keydown.jsp keypress.jsp").on("keydown.jsp",function(aL){if(aL.target!==this&&!(aI.length&&a(aL.target).closest(aI).length)){return}var aK=Y,aJ=G;switch(aL.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=aL.keyCode;aH();break;case 35:K(X-t);s=null;break;case 36:K(0);s=null;break}aG=aL.keyCode==s&&aK!=Y||aJ!=G;return !aG}).on("keypress.jsp",function(aJ){if(aJ.keyCode==s){aH()}if(aJ.target!==this&&!(aI.length&&a(aJ.target).closest(aI).length)){return}return !aG});if(aw.hideFocus){B.css("outline","none");if("hideFocus" in aj[0]){B.attr("hideFocus",true)}}else{B.css("outline","");if("hideFocus" in aj[0]){B.attr("hideFocus",false)}}function aH(){var aK=Y,aJ=G;switch(s){case 40:O.scrollByY(aw.keyboardSpeed,false);break;case 38:O.scrollByY(-aw.keyboardSpeed,false);break;case 34:case 32:O.scrollByY(t*aw.scrollPagePercent,false);break;case 33:O.scrollByY(-t*aw.scrollPagePercent,false);break;case 39:O.scrollByX(aw.keyboardSpeed,false);break;case 37:O.scrollByX(-aw.keyboardSpeed,false);break}aG=aK!=Y||aJ!=G;return aG}}function P(){B.attr("tabindex","-1").removeAttr("tabindex").off("keydown.jsp keypress.jsp");W.off(".jsp")}function A(){if(location.hash&&location.hash.length>1){var aI,aG,aH=escape(location.hash.substr(1));try{aI=a("#"+aH+', a[name="'+aH+'"]')}catch(s){return}if(aI.length&&W.find(aH)){if(aj.scrollTop()===0){aG=setInterval(function(){if(aj.scrollTop()>0){Z(aI,true);a(document).scrollTop(aj.position().top);clearInterval(aG)}},50)}else{Z(aI,true);a(document).scrollTop(aj.position().top)}}}}function k(){if(a(document.body).data("jspHijack")){return}a(document.body).data("jspHijack",true);a(document.body).delegate('a[href*="#"]',"click",function(s){var aG=this.href.substr(0,this.href.indexOf("#")),aI=location.href,aM,aN,aH,aK,aJ,aL;if(location.href.indexOf("#")!==-1){aI=location.href.substr(0,location.href.indexOf("#"))}if(aG!==aI){return}aM=escape(this.href.substr(this.href.indexOf("#")+1));aN;try{aN=a("#"+aM+', a[name="'+aM+'"]')}catch(aO){return}if(!aN.length){return}aH=aN.closest(".jspScrollable");aK=aH.data("jsp");aK.scrollToElement(aN,true);if(aH[0].scrollIntoView){aJ=a(window).scrollTop();aL=aN.offset().top;if(aL<aJ||aL>aJ+a(window).height()){aH[0].scrollIntoView()}}s.preventDefault()})}function al(){var aH,aG,aJ,aI,aK,s=false;aj.off("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").on("touchstart.jsp",function(aL){var aM=aL.originalEvent.touches[0];aH=aA();aG=ay();aJ=aM.pageX;aI=aM.pageY;aK=false;s=true}).on("touchmove.jsp",function(aO){if(!s){return}var aN=aO.originalEvent.touches[0],aM=Y,aL=G;O.scrollTo(aH+aJ-aN.pageX,aG+aI-aN.pageY);aK=aK||Math.abs(aJ-aN.pageX)>5||Math.abs(aI-aN.pageY)>5;return aM==Y&&aL==G}).on("touchend.jsp",function(aL){s=false}).on("click.jsp-touchclick",function(aL){if(aK){aK=false;return false}})}function e(){var s=ay(),aG=aA();B.removeClass("jspScrollable").off(".jsp");W.off(".jsp");B.replaceWith(am.append(W.children()));am.scrollTop(s);am.scrollLeft(aG);if(at){clearInterval(at)}}a.extend(O,{reinitialise:function(aG){aG=a.extend({},aw,aG);ap(aG)},scrollToElement:function(aH,aG,s){Z(aH,aG,s)},scrollTo:function(aH,s,aG){L(aH,aG);K(s,aG)},scrollToX:function(aG,s){L(aG,s)},scrollToY:function(s,aG){K(s,aG)},scrollToPercentX:function(aG,s){L(aG*(R-ah),s)},scrollToPercentY:function(aG,s){K(aG*(X-t),s)},scrollBy:function(aG,s,aH){O.scrollByX(aG,aH);O.scrollByY(s,aH)},scrollByX:function(s,aH){var aG=aA()+Math[s<0?"floor":"ceil"](s),aI=aG/(R-ah);U(aI*h,aH)},scrollByY:function(s,aH){var aG=ay()+Math[s<0?"floor":"ceil"](s),aI=aG/(X-t);T(aI*g,aH)},positionDragX:function(s,aG){U(s,aG)},positionDragY:function(aG,s){T(aG,s)},animate:function(aH,aK,aG,aJ,s){var aI={};aI[aK]=aG;aH.animate(aI,{duration:aw.animateDuration,easing:aw.animateEase,queue:false,step:aJ,complete:s})},getContentPositionX:function(){return aA()},getContentPositionY:function(){return ay()},getContentWidth:function(){return R},getContentHeight:function(){return X},getPercentScrolledX:function(){return aA()/(R-ah)},getPercentScrolledY:function(){return ay()/(X-t)},getIsScrollableH:function(){return aC},getIsScrollableV:function(){return ax},getContentPane:function(){return W},scrollToBottom:function(s){T(g,s)},hijackInternalLinks:a.noop,destroy:function(){e()}});ap(M)}c=a.extend({},a.fn.jScrollPane.defaults,c);a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){c[this]=c[this]||c.speed});return this.each(function(){var d=a(this),e=d.data("jsp");if(e){e.reinitialise(c)}else{a("script",d).filter('[type="text/javascript"],:not([type])').remove();e=new b(d,c);d.data("jsp",e)}})};a.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:undefined,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}}));